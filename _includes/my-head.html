<!-- Force sidebar to always start closed (Cover Page) on reload -->
<script>
  (function() {
    // 1. Force manual scroll restoration immediately
    if ('scrollRestoration' in history) {
      history.scrollRestoration = 'manual';
    }

    // 2. Clear the "closedOnce" flag from history state
    // Hydejack uses this flag to remember if the user has already seen/dismissed the cover.
    if (history.state && history.state.closedOnce) {
      var newState = Object.assign({}, history.state);
      delete newState.closedOnce;
      history.replaceState(newState, document.title);
    }

    // 3. Aggressively force scroll to top
    // Hydejack checks window.scrollY or scrollTop; if > 0, it dismisses the cover.
    // We force it to 0 repeatedly during load to fight any browser auto-restoration.
    window.scrollTo(0, 0);

    var forceScroll = function() {
      if (window.scrollY !== 0) window.scrollTo(0, 0);
    };

    // Check every frame for the first ~500ms
    var count = 0;
    var loop = function() {
      forceScroll();
      if (count++ < 30) requestAnimationFrame(loop);
    };
    requestAnimationFrame(loop);

    // Also force on unload to ensure next load starts clean
    window.addEventListener('beforeunload', function() {
      window.scrollTo(0, 0);
    });
  })();
</script>

